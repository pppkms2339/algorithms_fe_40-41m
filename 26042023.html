<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Tel-Ran</title>
</head>
<body>
	<script>
		class Node {
			value;
			next;
		}
		class Stack {
			#top = null;
			
			pop() {
				let answer = this.top.value;
				this.top = this.top.next;
				return answer;
			}
			
			push(value) {
				let temp = new Node();
				temp.value = value;
				if (this.top == null) {
					// Стек пуст, значит добавляемый элемент становится вершиной
					this.top = temp;
					return;
				}
				temp.next = this.top;
				this.top = temp;
			}
			
			isEmpty() {
				return this.top == null;
			}
			
			peek() {
				return this.top.value;
			}
			
		}
		function isBracketStringCorrect(str, alphabet) {
			let stack = new Stack();
			for (let i = 0; i < str.length; i++) {
				if(isOpenBracked(str[i], alphabet)) {
					stack.push(str[i]);
				} else {
					if (stack.isEmpty()) {
						return false;
					}
					let c = stack.pop();
					// Если скобки не парные, то выходим 
					if (!isBrackedsPair(c, str[i], alphabet)) {
						return false;
					}
				}
			}
			return stack.isEmpty();
		}
		
		function isOpenBracked(c, alphabet) {
			for (let i = 0; i < alphabet.length; i += 2) {
				if (alphabet[i] === c) {
					return true;
				}
			}
			return false;
		}
		
		// c1 - открывающаяся скобка, с2 - закрывающаяся
		function isBrackedsPair(c1, c2, alphabet) {
			for (let i = 1; i < alphabet.length; i += 2) {
				if (c2 === alphabet[i] && c1 === alphabet[i - 1]) {
					return true;
				}
			}
			return false;
		}
		
		var alphabet = ['(', ')', '[', ']', '{', '}'];
		console.log(isBracketStringCorrect("({})[]", alphabet));
		console.log(isBracketStringCorrect("({)}[]", alphabet));
		
	</script>
</body>
</html>